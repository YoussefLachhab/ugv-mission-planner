{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/mission_plan.schema.json",
  "title": "MissionPlan",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "mission_id": { "type": "string" },
    "created_at_utc": { "type": "string", "format": "date-time" },
    "goals": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "array",
        "prefixItems": [
          { "type": "number" },
          { "type": "number" }
        ],
        "minItems": 2,
        "maxItems": 2,
        "additionalItems": false
      },
      "description": "Ordered goal points A,B,... as [x,y]"
    },
    "waypoints": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "x": { "type": "number" },
          "y": { "type": "number" },
          "speed_mps": { "type": "number", "minimum": 0.0, "maximum": 2.0 }
        },
        "required": ["x", "y", "speed_mps"]
      },
      "default": []
    },
    "constraints": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "max_speed_mps": { "type": "number", "minimum": 0.0, "maximum": 2.0 },
        "avoid_zones": {
          "type": "array",
          "items": {
            "type": "array",
            "prefixItems": [
              { "type": "number" },
              { "type": "number" },
              { "type": "number" },
              { "type": "number" }
            ],
            "minItems": 4,
            "maxItems": 4,
            "additionalItems": false
          },
          "default": []
        },
        "battery_min_pct": { "type": "number", "minimum": 0.0, "maximum": 100.0 }
      },
      "required": ["max_speed_mps", "avoid_zones", "battery_min_pct"]
    }
  },
  "required": ["goals", "constraints"]
}
